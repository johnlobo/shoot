                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.4.3 #9207 (Jun 29 2015) (Mac OS X x86_64)
                              4 ; This file was generated Fri Jul  3 18:17:51 2015
                              5 ;--------------------------------------------------------
                              6 	.module user
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _create_shoot
                             13 	.globl _cpct_getScreenPtr
                             14 	.globl _cpct_drawSprite
                             15 	.globl _cpct_isKeyPressed
                             16 	.globl _cpct_scanKeyboard_f
                             17 	.globl _shoot_type
                             18 	.globl _user
                             19 	.globl _init_user
                             20 	.globl _get_user_max_shoots
                             21 	.globl _update_user
                             22 	.globl _draw_user
                             23 ;--------------------------------------------------------
                             24 ; special function registers
                             25 ;--------------------------------------------------------
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area _DATA
   0000                      30 _user::
   0000                      31 	.ds 18
   0012                      32 _shoot_type::
   0012                      33 	.ds 1
                             34 ;--------------------------------------------------------
                             35 ; ram data
                             36 ;--------------------------------------------------------
                             37 	.area _INITIALIZED
                             38 ;--------------------------------------------------------
                             39 ; absolute external ram data
                             40 ;--------------------------------------------------------
                             41 	.area _DABS (ABS)
                             42 ;--------------------------------------------------------
                             43 ; global & static initialisations
                             44 ;--------------------------------------------------------
                             45 	.area _HOME
                             46 	.area _GSINIT
                             47 	.area _GSFINAL
                             48 	.area _GSINIT
                             49 ;--------------------------------------------------------
                             50 ; Home
                             51 ;--------------------------------------------------------
                             52 	.area _HOME
                             53 	.area _HOME
                             54 ;--------------------------------------------------------
                             55 ; code
                             56 ;--------------------------------------------------------
                             57 	.area _CODE
                             58 ;src/entities/user.c:8: void init_user(){
                             59 ;	---------------------------------
                             60 ; Function init_user
                             61 ; ---------------------------------
   0000                      62 _init_user::
                             63 ;src/entities/user.c:17: user.w = 6;
   0000 21r08r00      [10]   64 	ld	hl,#_user + 8
   0003 36 06         [10]   65 	ld	(hl),#0x06
                             66 ;src/entities/user.c:18: user.h = 16;
   0005 FD 21r09r00   [14]   67 	ld	iy,#_user + 9
   0009 FD 36 00 10   [19]   68 	ld	0 (iy), #0x10
                             69 ;src/entities/user.c:19: user.x = 39-(user.w/2);
   000D 6E            [ 7]   70 	ld	l,(hl)
   000E CB 3D         [ 8]   71 	srl	l
   0010 3E 27         [ 7]   72 	ld	a,#0x27
   0012 95            [ 4]   73 	sub	a, l
   0013 32r06r00      [13]   74 	ld	(#(_user + 0x0006)),a
                             75 ;src/entities/user.c:20: user.y = 199-(user.h);
   0016 FD 66 00      [19]   76 	ld	h, 0 (iy)
   0019 3E C7         [ 7]   77 	ld	a,#0xC7
   001B 94            [ 4]   78 	sub	a, h
   001C 32r07r00      [13]   79 	ld	(#(_user + 0x0007)),a
                             80 ;src/entities/user.c:21: user.sprite = (u8*) ship03;
   001F 21r00r00      [10]   81 	ld	hl,#_ship03
   0022 22r04r00      [16]   82 	ld	((_user + 0x0004)), hl
                             83 ;src/entities/user.c:23: user.vx = 2;
   0025 21r0Er00      [10]   84 	ld	hl,#_user + 14
   0028 36 02         [10]   85 	ld	(hl),#0x02
                             86 ;src/entities/user.c:24: user.vy = 4;
   002A 21r0Fr00      [10]   87 	ld	hl,#_user + 15
   002D 36 04         [10]   88 	ld	(hl),#0x04
                             89 ;src/entities/user.c:25: user.max_shoots = 10;
   002F 21r11r00      [10]   90 	ld	hl,#_user + 17
   0032 36 0A         [10]   91 	ld	(hl),#0x0A
                             92 ;src/entities/user.c:26: shoot_type = 1;
   0034 21r12r00      [10]   93 	ld	hl,#_shoot_type + 0
   0037 36 01         [10]   94 	ld	(hl), #0x01
   0039 C9            [10]   95 	ret
                             96 ;src/entities/user.c:29: u8 get_user_max_shoots(){
                             97 ;	---------------------------------
                             98 ; Function get_user_max_shoots
                             99 ; ---------------------------------
   003A                     100 _get_user_max_shoots::
                            101 ;src/entities/user.c:30: return user.max_shoots;
   003A 21r11r00      [10]  102 	ld	hl,#_user+17
   003D 6E            [ 7]  103 	ld	l,(hl)
   003E C9            [10]  104 	ret
                            105 ;src/entities/user.c:36: void update_user() {
                            106 ;	---------------------------------
                            107 ; Function update_user
                            108 ; ---------------------------------
   003F                     109 _update_user::
   003F DD E5         [15]  110 	push	ix
   0041 DD 21 00 00   [14]  111 	ld	ix,#0
   0045 DD 39         [15]  112 	add	ix,sp
   0047 3B            [ 6]  113 	dec	sp
                            114 ;src/entities/user.c:39: cpct_scanKeyboard_f();
   0048 CDr00r00      [17]  115 	call	_cpct_scanKeyboard_f
                            116 ;src/entities/user.c:46: if ((cpct_isKeyPressed(Key_Q))){ 
   004B 21 08 08      [10]  117 	ld	hl,#0x0808
   004E E5            [11]  118 	push	hl
   004F CDr00r00      [17]  119 	call	_cpct_isKeyPressed
   0052 F1            [10]  120 	pop	af
   0053 7D            [ 4]  121 	ld	a,l
   0054 B7            [ 4]  122 	or	a, a
   0055 28 2D         [12]  123 	jr	Z,00105$
                            124 ;src/entities/user.c:47: if ((user.y-user.vy)>0)
   0057 21r07r00      [10]  125 	ld	hl, #(_user + 0x0007) + 0
   005A 5E            [ 7]  126 	ld	e,(hl)
   005B 4B            [ 4]  127 	ld	c,e
   005C 06 00         [ 7]  128 	ld	b,#0x00
   005E 21r0Fr00      [10]  129 	ld	hl, #_user + 15
   0061 56            [ 7]  130 	ld	d,(hl)
   0062 7A            [ 4]  131 	ld	a,d
   0063 6F            [ 4]  132 	ld	l,a
   0064 17            [ 4]  133 	rla
   0065 9F            [ 4]  134 	sbc	a, a
   0066 67            [ 4]  135 	ld	h,a
   0067 79            [ 4]  136 	ld	a,c
   0068 95            [ 4]  137 	sub	a, l
   0069 6F            [ 4]  138 	ld	l,a
   006A 78            [ 4]  139 	ld	a,b
   006B 9C            [ 4]  140 	sbc	a, h
   006C 67            [ 4]  141 	ld	h,a
   006D AF            [ 4]  142 	xor	a, a
   006E BD            [ 4]  143 	cp	a, l
   006F 9C            [ 4]  144 	sbc	a, h
   0070 E2r75r00      [10]  145 	jp	PO, 00167$
   0073 EE 80         [ 7]  146 	xor	a, #0x80
   0075                     147 00167$:
   0075 F2r7Fr00      [10]  148 	jp	P,00102$
                            149 ;src/entities/user.c:48: user.y = user.y - user.vy;
   0078 7B            [ 4]  150 	ld	a,e
   0079 92            [ 4]  151 	sub	a, d
   007A 32r07r00      [13]  152 	ld	(#(_user + 0x0007)),a
   007D 18 05         [12]  153 	jr	00105$
   007F                     154 00102$:
                            155 ;src/entities/user.c:50: user.y = 0;
   007F 21r07r00      [10]  156 	ld	hl,#(_user + 0x0007)
   0082 36 00         [10]  157 	ld	(hl),#0x00
   0084                     158 00105$:
                            159 ;src/entities/user.c:53: if ((cpct_isKeyPressed(Key_P))){ 
   0084 21 03 08      [10]  160 	ld	hl,#0x0803
   0087 E5            [11]  161 	push	hl
   0088 CDr00r00      [17]  162 	call	_cpct_isKeyPressed
   008B F1            [10]  163 	pop	af
   008C 7D            [ 4]  164 	ld	a,l
   008D B7            [ 4]  165 	or	a, a
   008E 28 3F         [12]  166 	jr	Z,00110$
                            167 ;src/entities/user.c:54: if ((user.x+user.vx<(79-user.w)))
   0090 21r06r00      [10]  168 	ld	hl, #(_user + 0x0006) + 0
   0093 5E            [ 7]  169 	ld	e,(hl)
   0094 4B            [ 4]  170 	ld	c,e
   0095 06 00         [ 7]  171 	ld	b,#0x00
   0097 21r0Er00      [10]  172 	ld	hl, #_user + 14
   009A 56            [ 7]  173 	ld	d,(hl)
   009B 7A            [ 4]  174 	ld	a,d
   009C 6F            [ 4]  175 	ld	l,a
   009D 17            [ 4]  176 	rla
   009E 9F            [ 4]  177 	sbc	a, a
   009F 67            [ 4]  178 	ld	h,a
   00A0 09            [11]  179 	add	hl,bc
   00A1 4D            [ 4]  180 	ld	c,l
   00A2 44            [ 4]  181 	ld	b,h
   00A3 3Ar08r00      [13]  182 	ld	a,(#_user + 8)
   00A6 DD 77 FF      [19]  183 	ld	-1 (ix), a
   00A9 6F            [ 4]  184 	ld	l, a
   00AA 26 00         [ 7]  185 	ld	h,#0x00
   00AC 3E 4F         [ 7]  186 	ld	a,#0x4F
   00AE 95            [ 4]  187 	sub	a, l
   00AF 6F            [ 4]  188 	ld	l,a
   00B0 3E 00         [ 7]  189 	ld	a,#0x00
   00B2 9C            [ 4]  190 	sbc	a, h
   00B3 67            [ 4]  191 	ld	h,a
   00B4 79            [ 4]  192 	ld	a,c
   00B5 95            [ 4]  193 	sub	a, l
   00B6 78            [ 4]  194 	ld	a,b
   00B7 9C            [ 4]  195 	sbc	a, h
   00B8 E2rBDr00      [10]  196 	jp	PO, 00168$
   00BB EE 80         [ 7]  197 	xor	a, #0x80
   00BD                     198 00168$:
   00BD F2rC7r00      [10]  199 	jp	P,00107$
                            200 ;src/entities/user.c:55: user.x = user.x + user.vx;
   00C0 7B            [ 4]  201 	ld	a,e
   00C1 82            [ 4]  202 	add	a, d
   00C2 32r06r00      [13]  203 	ld	(#(_user + 0x0006)),a
   00C5 18 08         [12]  204 	jr	00110$
   00C7                     205 00107$:
                            206 ;src/entities/user.c:57: user.x = 79-user.w;
   00C7 3E 4F         [ 7]  207 	ld	a,#0x4F
   00C9 DD 96 FF      [19]  208 	sub	a, -1 (ix)
   00CC 32r06r00      [13]  209 	ld	(#(_user + 0x0006)),a
   00CF                     210 00110$:
                            211 ;src/entities/user.c:60: if (cpct_isKeyPressed(Key_O)){
   00CF 21 04 04      [10]  212 	ld	hl,#0x0404
   00D2 E5            [11]  213 	push	hl
   00D3 CDr00r00      [17]  214 	call	_cpct_isKeyPressed
   00D6 F1            [10]  215 	pop	af
   00D7 7D            [ 4]  216 	ld	a,l
   00D8 B7            [ 4]  217 	or	a, a
   00D9 28 2D         [12]  218 	jr	Z,00115$
                            219 ;src/entities/user.c:61: if ((user.x-user.vx)>0) 
   00DB 21r06r00      [10]  220 	ld	hl, #(_user + 0x0006) + 0
   00DE 5E            [ 7]  221 	ld	e,(hl)
   00DF 4B            [ 4]  222 	ld	c,e
   00E0 06 00         [ 7]  223 	ld	b,#0x00
   00E2 21r0Er00      [10]  224 	ld	hl, #_user + 14
   00E5 56            [ 7]  225 	ld	d,(hl)
   00E6 7A            [ 4]  226 	ld	a,d
   00E7 6F            [ 4]  227 	ld	l,a
   00E8 17            [ 4]  228 	rla
   00E9 9F            [ 4]  229 	sbc	a, a
   00EA 67            [ 4]  230 	ld	h,a
   00EB 79            [ 4]  231 	ld	a,c
   00EC 95            [ 4]  232 	sub	a, l
   00ED 6F            [ 4]  233 	ld	l,a
   00EE 78            [ 4]  234 	ld	a,b
   00EF 9C            [ 4]  235 	sbc	a, h
   00F0 67            [ 4]  236 	ld	h,a
   00F1 AF            [ 4]  237 	xor	a, a
   00F2 BD            [ 4]  238 	cp	a, l
   00F3 9C            [ 4]  239 	sbc	a, h
   00F4 E2rF9r00      [10]  240 	jp	PO, 00169$
   00F7 EE 80         [ 7]  241 	xor	a, #0x80
   00F9                     242 00169$:
   00F9 F2r03r01      [10]  243 	jp	P,00112$
                            244 ;src/entities/user.c:62: user.x = user.x - user.vx;    
   00FC 7B            [ 4]  245 	ld	a,e
   00FD 92            [ 4]  246 	sub	a, d
   00FE 32r06r00      [13]  247 	ld	(#(_user + 0x0006)),a
   0101 18 05         [12]  248 	jr	00115$
   0103                     249 00112$:
                            250 ;src/entities/user.c:64: user.x = 0;
   0103 21r06r00      [10]  251 	ld	hl,#(_user + 0x0006)
   0106 36 00         [10]  252 	ld	(hl),#0x00
   0108                     253 00115$:
                            254 ;src/entities/user.c:67: if (cpct_isKeyPressed(Key_A)){
   0108 21 08 20      [10]  255 	ld	hl,#0x2008
   010B E5            [11]  256 	push	hl
   010C CDr00r00      [17]  257 	call	_cpct_isKeyPressed
   010F F1            [10]  258 	pop	af
   0110 7D            [ 4]  259 	ld	a,l
   0111 B7            [ 4]  260 	or	a, a
   0112 28 37         [12]  261 	jr	Z,00120$
                            262 ;src/entities/user.c:68: if ((user.y<(199-user.h) ))
   0114 21r07r00      [10]  263 	ld	hl, #(_user + 0x0007) + 0
   0117 5E            [ 7]  264 	ld	e,(hl)
   0118 3Ar09r00      [13]  265 	ld	a,(#_user + 9)
   011B DD 77 FF      [19]  266 	ld	-1 (ix), a
   011E 6F            [ 4]  267 	ld	l, a
   011F 26 00         [ 7]  268 	ld	h,#0x00
   0121 3E C7         [ 7]  269 	ld	a,#0xC7
   0123 95            [ 4]  270 	sub	a, l
   0124 6F            [ 4]  271 	ld	l,a
   0125 3E 00         [ 7]  272 	ld	a,#0x00
   0127 9C            [ 4]  273 	sbc	a, h
   0128 67            [ 4]  274 	ld	h,a
   0129 4B            [ 4]  275 	ld	c,e
   012A 16 00         [ 7]  276 	ld	d,#0x00
   012C 79            [ 4]  277 	ld	a,c
   012D 95            [ 4]  278 	sub	a, l
   012E 7A            [ 4]  279 	ld	a,d
   012F 9C            [ 4]  280 	sbc	a, h
   0130 E2r35r01      [10]  281 	jp	PO, 00170$
   0133 EE 80         [ 7]  282 	xor	a, #0x80
   0135                     283 00170$:
   0135 F2r43r01      [10]  284 	jp	P,00117$
                            285 ;src/entities/user.c:69: user.y = user.y + user.vy;
   0138 21r0Fr00      [10]  286 	ld	hl, #_user + 15
   013B 6E            [ 7]  287 	ld	l,(hl)
   013C 7B            [ 4]  288 	ld	a,e
   013D 85            [ 4]  289 	add	a, l
   013E 32r07r00      [13]  290 	ld	(#(_user + 0x0007)),a
   0141 18 08         [12]  291 	jr	00120$
   0143                     292 00117$:
                            293 ;src/entities/user.c:71: user.y = 199-user.h;
   0143 3E C7         [ 7]  294 	ld	a,#0xC7
   0145 DD 96 FF      [19]  295 	sub	a, -1 (ix)
   0148 32r07r00      [13]  296 	ld	(#(_user + 0x0007)),a
   014B                     297 00120$:
                            298 ;src/entities/user.c:74: if (cpct_isKeyPressed(Key_D)){
   014B 21 07 20      [10]  299 	ld	hl,#0x2007
   014E E5            [11]  300 	push	hl
   014F CDr00r00      [17]  301 	call	_cpct_isKeyPressed
   0152 F1            [10]  302 	pop	af
   0153 7D            [ 4]  303 	ld	a,l
   0154 B7            [ 4]  304 	or	a, a
   0155 28 1B         [12]  305 	jr	Z,00122$
                            306 ;src/entities/user.c:75: shoot_type=(shoot_type+1)%2;
   0157 FD 21r12r00   [14]  307 	ld	iy,#_shoot_type
   015B FD 6E 00      [19]  308 	ld	l,0 (iy)
   015E 26 00         [ 7]  309 	ld	h,#0x00
   0160 23            [ 6]  310 	inc	hl
   0161 01 02 00      [10]  311 	ld	bc,#0x0002
   0164 C5            [11]  312 	push	bc
   0165 E5            [11]  313 	push	hl
   0166 CDr00r00      [17]  314 	call	__modsint
   0169 F1            [10]  315 	pop	af
   016A F1            [10]  316 	pop	af
   016B FD 21r12r00   [14]  317 	ld	iy,#_shoot_type
   016F FD 75 00      [19]  318 	ld	0 (iy),l
   0172                     319 00122$:
                            320 ;src/entities/user.c:78: if (cpct_isKeyPressed(Key_Space)){
   0172 21 05 80      [10]  321 	ld	hl,#0x8005
   0175 E5            [11]  322 	push	hl
   0176 CDr00r00      [17]  323 	call	_cpct_isKeyPressed
   0179 F1            [10]  324 	pop	af
   017A 7D            [ 4]  325 	ld	a,l
   017B B7            [ 4]  326 	or	a, a
   017C 28 1B         [12]  327 	jr	Z,00125$
                            328 ;src/entities/user.c:79: create_shoot(user.x+3, user.y-1, shoot_type);
   017E 3Ar07r00      [13]  329 	ld	a, (#_user + 7)
   0181 5F            [ 4]  330 	ld	e,a
   0182 1D            [ 4]  331 	dec	e
   0183 3Ar06r00      [13]  332 	ld	a, (#_user + 6)
   0186 57            [ 4]  333 	ld	d,a
   0187 14            [ 4]  334 	inc	d
   0188 14            [ 4]  335 	inc	d
   0189 14            [ 4]  336 	inc	d
   018A 3Ar12r00      [13]  337 	ld	a,(_shoot_type)
   018D F5            [11]  338 	push	af
   018E 33            [ 6]  339 	inc	sp
   018F 7B            [ 4]  340 	ld	a,e
   0190 F5            [11]  341 	push	af
   0191 33            [ 6]  342 	inc	sp
   0192 D5            [11]  343 	push	de
   0193 33            [ 6]  344 	inc	sp
   0194 CDr00r00      [17]  345 	call	_create_shoot
   0197 F1            [10]  346 	pop	af
   0198 33            [ 6]  347 	inc	sp
   0199                     348 00125$:
   0199 33            [ 6]  349 	inc	sp
   019A DD E1         [14]  350 	pop	ix
   019C C9            [10]  351 	ret
                            352 ;src/entities/user.c:84: void draw_user(u8* screen){
                            353 ;	---------------------------------
                            354 ; Function draw_user
                            355 ; ---------------------------------
   019D                     356 _draw_user::
   019D DD E5         [15]  357 	push	ix
   019F DD 21 00 00   [14]  358 	ld	ix,#0
   01A3 DD 39         [15]  359 	add	ix,sp
                            360 ;src/entities/user.c:86: pscreen = cpct_getScreenPtr(screen, user.x, user.y);
   01A5 21r07r00      [10]  361 	ld	hl, #_user + 7
   01A8 4E            [ 7]  362 	ld	c,(hl)
   01A9 21r06r00      [10]  363 	ld	hl, #_user + 6
   01AC 66            [ 7]  364 	ld	h,(hl)
   01AD DD 5E 04      [19]  365 	ld	e,4 (ix)
   01B0 DD 56 05      [19]  366 	ld	d,5 (ix)
   01B3 79            [ 4]  367 	ld	a,c
   01B4 F5            [11]  368 	push	af
   01B5 33            [ 6]  369 	inc	sp
   01B6 E5            [11]  370 	push	hl
   01B7 33            [ 6]  371 	inc	sp
   01B8 D5            [11]  372 	push	de
   01B9 CDr00r00      [17]  373 	call	_cpct_getScreenPtr
   01BC F1            [10]  374 	pop	af
   01BD F1            [10]  375 	pop	af
   01BE EB            [ 4]  376 	ex	de,hl
                            377 ;src/entities/user.c:87: cpct_drawSprite( (u8*) user.sprite,pscreen,user.w,user.h);
   01BF 21r09r00      [10]  378 	ld	hl, #_user + 9
   01C2 4E            [ 7]  379 	ld	c,(hl)
   01C3 21r08r00      [10]  380 	ld	hl, #_user + 8
   01C6 46            [ 7]  381 	ld	b,(hl)
   01C7 2Ar04r00      [16]  382 	ld	hl, (#_user + 4)
   01CA E5            [11]  383 	push	hl
   01CB FD E1         [14]  384 	pop	iy
   01CD 79            [ 4]  385 	ld	a,c
   01CE F5            [11]  386 	push	af
   01CF 33            [ 6]  387 	inc	sp
   01D0 C5            [11]  388 	push	bc
   01D1 33            [ 6]  389 	inc	sp
   01D2 D5            [11]  390 	push	de
   01D3 FD E5         [15]  391 	push	iy
   01D5 CDr00r00      [17]  392 	call	_cpct_drawSprite
   01D8 21 06 00      [10]  393 	ld	hl,#6
   01DB 39            [11]  394 	add	hl,sp
   01DC F9            [ 6]  395 	ld	sp,hl
   01DD DD E1         [14]  396 	pop	ix
   01DF C9            [10]  397 	ret
                            398 	.area _CODE
                            399 	.area _INITIALIZER
                            400 	.area _CABS (ABS)
