                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.5.0 #9253 (Aug  4 2015) (Mac OS X x86_64)
                              4 ; This file was generated Mon Aug 10 01:29:59 2015
                              5 ;--------------------------------------------------------
                              6 	.module user
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _create_explosion
                             13 	.globl _create_enemy_group
                             14 	.globl _create_enemy
                             15 	.globl _create_shoot
                             16 	.globl _cpct_getScreenPtr
                             17 	.globl _cpct_drawSprite
                             18 	.globl _cpct_isKeyPressed
                             19 	.globl _cpct_scanKeyboard_f
                             20 	.globl _rand
                             21 	.globl _engine_anim
                             22 	.globl _shoot_type
                             23 	.globl _user
                             24 	.globl _init_user
                             25 	.globl _user_init_level
                             26 	.globl _get_last_moved_user
                             27 	.globl _get_user_max_shoots
                             28 	.globl _get_user_speed
                             29 	.globl _user_engine
                             30 	.globl _update_user
                             31 	.globl _draw_user
                             32 	.globl _set_score
                             33 	.globl _add_score
                             34 	.globl _get_score
                             35 ;--------------------------------------------------------
                             36 ; special function registers
                             37 ;--------------------------------------------------------
                             38 ;--------------------------------------------------------
                             39 ; ram data
                             40 ;--------------------------------------------------------
                             41 	.area _DATA
   0000                      42 _user::
   0000                      43 	.ds 25
   0019                      44 _shoot_type::
   0019                      45 	.ds 1
   001A                      46 _engine_anim::
   001A                      47 	.ds 4
                             48 ;--------------------------------------------------------
                             49 ; ram data
                             50 ;--------------------------------------------------------
                             51 	.area _INITIALIZED
                             52 ;--------------------------------------------------------
                             53 ; absolute external ram data
                             54 ;--------------------------------------------------------
                             55 	.area _DABS (ABS)
                             56 ;--------------------------------------------------------
                             57 ; global & static initialisations
                             58 ;--------------------------------------------------------
                             59 	.area _HOME
                             60 	.area _GSINIT
                             61 	.area _GSFINAL
                             62 	.area _GSINIT
                             63 ;--------------------------------------------------------
                             64 ; Home
                             65 ;--------------------------------------------------------
                             66 	.area _HOME
                             67 	.area _HOME
                             68 ;--------------------------------------------------------
                             69 ; code
                             70 ;--------------------------------------------------------
                             71 	.area _CODE
                             72 ;src/entities/user.c:10: void init_user(){
                             73 ;	---------------------------------
                             74 ; Function init_user
                             75 ; ---------------------------------
   0000                      76 _init_user::
                             77 ;src/entities/user.c:12: user.w = 4;
   0000 21r0Ar00      [10]   78 	ld	hl,#_user + 10
   0003 36 04         [10]   79 	ld	(hl),#0x04
                             80 ;src/entities/user.c:13: user.h = 8;
   0005 FD 21r0Br00   [14]   81 	ld	iy,#_user + 11
   0009 FD 36 00 08   [19]   82 	ld	0 (iy), #0x08
                             83 ;src/entities/user.c:14: user.x = 39-(user.w/2);
   000D 6E            [ 7]   84 	ld	l,(hl)
   000E CB 3D         [ 8]   85 	srl	l
   0010 3E 27         [ 7]   86 	ld	a,#0x27
   0012 95            [ 4]   87 	sub	a, l
   0013 32r02r00      [13]   88 	ld	(#(_user + 0x0002)),a
                             89 ;src/entities/user.c:15: user.y = 199-(user.h);
   0016 FD 66 00      [19]   90 	ld	h, 0 (iy)
   0019 3E C7         [ 7]   91 	ld	a,#0xC7
   001B 94            [ 4]   92 	sub	a, h
   001C 32r03r00      [13]   93 	ld	(#(_user + 0x0003)),a
                             94 ;src/entities/user.c:16: user.vx = 0;
   001F 21r04r00      [10]   95 	ld	hl,#_user + 4
   0022 36 00         [10]   96 	ld	(hl),#0x00
                             97 ;src/entities/user.c:17: user.vy = 0;
   0024 21r05r00      [10]   98 	ld	hl,#_user + 5
   0027 36 00         [10]   99 	ld	(hl),#0x00
                            100 ;src/entities/user.c:18: user.topvx = 4;
   0029 21r06r00      [10]  101 	ld	hl,#_user + 6
   002C 36 04         [10]  102 	ld	(hl),#0x04
                            103 ;src/entities/user.c:19: user.topvy = 5;
   002E 21r07r00      [10]  104 	ld	hl,#_user + 7
   0031 36 05         [10]  105 	ld	(hl),#0x05
                            106 ;src/entities/user.c:20: user.ax=0;
   0033 21r08r00      [10]  107 	ld	hl,#_user + 8
   0036 36 00         [10]  108 	ld	(hl),#0x00
                            109 ;src/entities/user.c:21: user.ay=0;
   0038 21r09r00      [10]  110 	ld	hl,#_user + 9
   003B 36 00         [10]  111 	ld	(hl),#0x00
                            112 ;src/entities/user.c:22: user.sprite = (u8*) G_ship_00;
   003D 21r00r00      [10]  113 	ld	hl,#_G_ship_00
   0040 22r00r00      [16]  114 	ld	(_user), hl
                            115 ;src/entities/user.c:23: user.score = 0;
   0043 21 00 00      [10]  116 	ld	hl,#0x0000
   0046 22r0Fr00      [16]  117 	ld	((_user + 0x000f)),hl
   0049 22r11r00      [16]  118 	ld	((_user + 0x000f)+2), hl
                            119 ;src/entities/user.c:24: user.shield = 0;
   004C 21r0Dr00      [10]  120 	ld	hl,#_user + 13
   004F 36 00         [10]  121 	ld	(hl),#0x00
                            122 ;src/entities/user.c:25: user.lives = 0;
   0051 21r0Er00      [10]  123 	ld	hl,#_user + 14
   0054 36 00         [10]  124 	ld	(hl),#0x00
                            125 ;src/entities/user.c:27: user.max_shoots = 3;
   0056 21r0Cr00      [10]  126 	ld	hl,#_user + 12
   0059 36 03         [10]  127 	ld	(hl),#0x03
                            128 ;src/entities/user.c:28: shoot_type = 1;
   005B 21r19r00      [10]  129 	ld	hl,#_shoot_type + 0
   005E 36 01         [10]  130 	ld	(hl), #0x01
                            131 ;src/entities/user.c:29: user.last_moved = 0;
   0060 21 00 00      [10]  132 	ld	hl,#0x0000
   0063 22r15r00      [16]  133 	ld	((_user + 0x0015)),hl
   0066 22r17r00      [16]  134 	ld	((_user + 0x0015)+2), hl
                            135 ;src/entities/user.c:30: user.engine_state = 0;
   0069 21r14r00      [10]  136 	ld	hl,#_user + 20
   006C 36 00         [10]  137 	ld	(hl),#0x00
                            138 ;src/entities/user.c:32: engine_anim[0] = (u8*) G_engine_00;
   006E 21r00r00      [10]  139 	ld	hl,#_G_engine_00
   0071 22r1Ar00      [16]  140 	ld	(_engine_anim), hl
                            141 ;src/entities/user.c:33: engine_anim[1] = (u8*) G_engine_01;
   0074 21r00r00      [10]  142 	ld	hl,#_G_engine_01
   0077 22r1Cr00      [16]  143 	ld	((_engine_anim + 0x0002)), hl
   007A C9            [10]  144 	ret
                            145 ;src/entities/user.c:36: void user_init_level(){
                            146 ;	---------------------------------
                            147 ; Function user_init_level
                            148 ; ---------------------------------
   007B                     149 _user_init_level::
                            150 ;src/entities/user.c:37: user.lives=3;
   007B 21r0Er00      [10]  151 	ld	hl,#_user + 14
   007E 36 03         [10]  152 	ld	(hl),#0x03
                            153 ;src/entities/user.c:38: user.shield=0;
   0080 21r0Dr00      [10]  154 	ld	hl,#_user + 13
   0083 36 00         [10]  155 	ld	(hl),#0x00
                            156 ;src/entities/user.c:39: user.max_shoots=3;
   0085 21r0Cr00      [10]  157 	ld	hl,#_user + 12
   0088 36 03         [10]  158 	ld	(hl),#0x03
   008A C9            [10]  159 	ret
                            160 ;src/entities/user.c:46: long get_last_moved_user(){
                            161 ;	---------------------------------
                            162 ; Function get_last_moved_user
                            163 ; ---------------------------------
   008B                     164 _get_last_moved_user::
                            165 ;src/entities/user.c:47: return user.last_moved;
   008B 2Ar15r00      [16]  166 	ld	hl, (#(_user + 0x0015) + 0)
   008E ED 5Br17r00   [20]  167 	ld	de, (#(_user + 0x0015) + 2)
   0092 C9            [10]  168 	ret
                            169 ;src/entities/user.c:50: u8 get_user_max_shoots(){
                            170 ;	---------------------------------
                            171 ; Function get_user_max_shoots
                            172 ; ---------------------------------
   0093                     173 _get_user_max_shoots::
                            174 ;src/entities/user.c:51: return user.max_shoots;
   0093 21r0Cr00      [10]  175 	ld	hl,#_user+12
   0096 6E            [ 7]  176 	ld	l,(hl)
   0097 C9            [10]  177 	ret
                            178 ;src/entities/user.c:53: u8 get_user_speed(){
                            179 ;	---------------------------------
                            180 ; Function get_user_speed
                            181 ; ---------------------------------
   0098                     182 _get_user_speed::
                            183 ;src/entities/user.c:54: return user.speed;
   0098 21r13r00      [10]  184 	ld	hl,#_user+19
   009B 6E            [ 7]  185 	ld	l,(hl)
   009C C9            [10]  186 	ret
                            187 ;src/entities/user.c:60: void user_engine(u8* screen){
                            188 ;	---------------------------------
                            189 ; Function user_engine
                            190 ; ---------------------------------
   009D                     191 _user_engine::
   009D DD E5         [15]  192 	push	ix
   009F DD 21 00 00   [14]  193 	ld	ix,#0
   00A3 DD 39         [15]  194 	add	ix,sp
                            195 ;src/entities/user.c:63: user.engine_state++;
   00A5 11r14r00      [10]  196 	ld	de,#_user + 20
   00A8 1A            [ 7]  197 	ld	a,(de)
   00A9 3C            [ 4]  198 	inc	a
   00AA 12            [ 7]  199 	ld	(de),a
                            200 ;src/entities/user.c:64: if (user.engine_state==2) user.engine_state=0;
   00AB D6 02         [ 7]  201 	sub	a, #0x02
   00AD 20 02         [12]  202 	jr	NZ,00102$
   00AF AF            [ 4]  203 	xor	a, a
   00B0 12            [ 7]  204 	ld	(de),a
   00B1                     205 00102$:
                            206 ;src/entities/user.c:66: pscreen = cpct_getScreenPtr(screen, user.x+1, user.y+7);
   00B1 3Ar03r00      [13]  207 	ld	a, (#_user + 3)
   00B4 C6 07         [ 7]  208 	add	a, #0x07
   00B6 4F            [ 4]  209 	ld	c,a
   00B7 3Ar02r00      [13]  210 	ld	a, (#_user + 2)
   00BA 67            [ 4]  211 	ld	h,a
   00BB 24            [ 4]  212 	inc	h
   00BC DD 6E 04      [19]  213 	ld	l,4 (ix)
   00BF DD 46 05      [19]  214 	ld	b,5 (ix)
   00C2 D5            [11]  215 	push	de
   00C3 79            [ 4]  216 	ld	a,c
   00C4 F5            [11]  217 	push	af
   00C5 33            [ 6]  218 	inc	sp
   00C6 E5            [11]  219 	push	hl
   00C7 33            [ 6]  220 	inc	sp
   00C8 60            [ 4]  221 	ld	h, b
   00C9 E5            [11]  222 	push	hl
   00CA CDr00r00      [17]  223 	call	_cpct_getScreenPtr
   00CD D1            [10]  224 	pop	de
                            225 ;src/entities/user.c:67: cpct_drawSprite( (u8*) engine_anim[user.engine_state],pscreen,2,1);
   00CE 4D            [ 4]  226 	ld	c, l
   00CF 44            [ 4]  227 	ld	b, h
   00D0 1A            [ 7]  228 	ld	a,(de)
   00D1 6F            [ 4]  229 	ld	l,a
   00D2 26 00         [ 7]  230 	ld	h,#0x00
   00D4 29            [11]  231 	add	hl, hl
   00D5 11r1Ar00      [10]  232 	ld	de,#_engine_anim
   00D8 19            [11]  233 	add	hl,de
   00D9 5E            [ 7]  234 	ld	e,(hl)
   00DA 23            [ 6]  235 	inc	hl
   00DB 56            [ 7]  236 	ld	d,(hl)
   00DC 21 02 01      [10]  237 	ld	hl,#0x0102
   00DF E5            [11]  238 	push	hl
   00E0 C5            [11]  239 	push	bc
   00E1 D5            [11]  240 	push	de
   00E2 CDr00r00      [17]  241 	call	_cpct_drawSprite
   00E5 DD E1         [14]  242 	pop	ix
   00E7 C9            [10]  243 	ret
                            244 ;src/entities/user.c:70: void update_user() {
                            245 ;	---------------------------------
                            246 ; Function update_user
                            247 ; ---------------------------------
   00E8                     248 _update_user::
   00E8 DD E5         [15]  249 	push	ix
   00EA DD 21 00 00   [14]  250 	ld	ix,#0
   00EE DD 39         [15]  251 	add	ix,sp
   00F0 F5            [11]  252 	push	af
   00F1 F5            [11]  253 	push	af
                            254 ;src/entities/user.c:73: user.ax=0;
   00F2 21r08r00      [10]  255 	ld	hl,#(_user + 0x0008)
   00F5 36 00         [10]  256 	ld	(hl),#0x00
                            257 ;src/entities/user.c:76: cpct_scanKeyboard_f();
   00F7 CDr00r00      [17]  258 	call	_cpct_scanKeyboard_f
                            259 ;src/entities/user.c:83: if ((cpct_isKeyPressed(Key_Q))){ 
   00FA 21 08 08      [10]  260 	ld	hl,#0x0808
   00FD E5            [11]  261 	push	hl
   00FE CDr00r00      [17]  262 	call	_cpct_isKeyPressed
   0101 F1            [10]  263 	pop	af
                            264 ;src/entities/user.c:84: user.ay = -2;
                            265 ;src/entities/user.c:83: if ((cpct_isKeyPressed(Key_Q))){ 
   0102 7D            [ 4]  266 	ld	a,l
   0103 B7            [ 4]  267 	or	a, a
   0104 28 07         [12]  268 	jr	Z,00104$
                            269 ;src/entities/user.c:84: user.ay = -2;
   0106 21r09r00      [10]  270 	ld	hl,#(_user + 0x0009)
   0109 36 FE         [10]  271 	ld	(hl),#0xFE
   010B 18 11         [12]  272 	jr	00105$
   010D                     273 00104$:
                            274 ;src/entities/user.c:85: } else if (cpct_isKeyPressed(Key_A)){
   010D 21 08 20      [10]  275 	ld	hl,#0x2008
   0110 E5            [11]  276 	push	hl
   0111 CDr00r00      [17]  277 	call	_cpct_isKeyPressed
   0114 F1            [10]  278 	pop	af
   0115 7D            [ 4]  279 	ld	a,l
   0116 B7            [ 4]  280 	or	a, a
   0117 28 05         [12]  281 	jr	Z,00105$
                            282 ;src/entities/user.c:86: user.ay=2;    
   0119 21r09r00      [10]  283 	ld	hl,#(_user + 0x0009)
   011C 36 02         [10]  284 	ld	(hl),#0x02
   011E                     285 00105$:
                            286 ;src/entities/user.c:89: if ((cpct_isKeyPressed(Key_P))){ 
   011E 21 03 08      [10]  287 	ld	hl,#0x0803
   0121 E5            [11]  288 	push	hl
   0122 CDr00r00      [17]  289 	call	_cpct_isKeyPressed
   0125 F1            [10]  290 	pop	af
   0126 7D            [ 4]  291 	ld	a,l
   0127 B7            [ 4]  292 	or	a, a
   0128 28 07         [12]  293 	jr	Z,00109$
                            294 ;src/entities/user.c:90: user.ax = 2;
   012A 21r08r00      [10]  295 	ld	hl,#(_user + 0x0008)
   012D 36 02         [10]  296 	ld	(hl),#0x02
   012F 18 11         [12]  297 	jr	00110$
   0131                     298 00109$:
                            299 ;src/entities/user.c:91: } else if (cpct_isKeyPressed(Key_O)){
   0131 21 04 04      [10]  300 	ld	hl,#0x0404
   0134 E5            [11]  301 	push	hl
   0135 CDr00r00      [17]  302 	call	_cpct_isKeyPressed
   0138 F1            [10]  303 	pop	af
   0139 7D            [ 4]  304 	ld	a,l
   013A B7            [ 4]  305 	or	a, a
   013B 28 05         [12]  306 	jr	Z,00110$
                            307 ;src/entities/user.c:92: user.ax=-2;    
   013D 21r08r00      [10]  308 	ld	hl,#(_user + 0x0008)
   0140 36 FE         [10]  309 	ld	(hl),#0xFE
   0142                     310 00110$:
                            311 ;src/entities/user.c:96: if (cpct_isKeyPressed(Key_D)){
   0142 21 07 20      [10]  312 	ld	hl,#0x2007
   0145 E5            [11]  313 	push	hl
   0146 CDr00r00      [17]  314 	call	_cpct_isKeyPressed
   0149 F1            [10]  315 	pop	af
   014A 7D            [ 4]  316 	ld	a,l
   014B B7            [ 4]  317 	or	a, a
   014C 28 1B         [12]  318 	jr	Z,00112$
                            319 ;src/entities/user.c:97: shoot_type=(shoot_type+1)%2;
   014E FD 21r19r00   [14]  320 	ld	iy,#_shoot_type
   0152 FD 6E 00      [19]  321 	ld	l,0 (iy)
   0155 26 00         [ 7]  322 	ld	h,#0x00
   0157 23            [ 6]  323 	inc	hl
   0158 01 02 00      [10]  324 	ld	bc,#0x0002
   015B C5            [11]  325 	push	bc
   015C E5            [11]  326 	push	hl
   015D CDr00r00      [17]  327 	call	__modsint
   0160 F1            [10]  328 	pop	af
   0161 F1            [10]  329 	pop	af
   0162 FD 21r19r00   [14]  330 	ld	iy,#_shoot_type
   0166 FD 75 00      [19]  331 	ld	0 (iy),l
   0169                     332 00112$:
                            333 ;src/entities/user.c:100: if (cpct_isKeyPressed(Key_H)){
   0169 21 05 10      [10]  334 	ld	hl,#0x1005
   016C E5            [11]  335 	push	hl
   016D CDr00r00      [17]  336 	call	_cpct_isKeyPressed
   0170 F1            [10]  337 	pop	af
   0171 7D            [ 4]  338 	ld	a,l
   0172 B7            [ 4]  339 	or	a, a
   0173 28 39         [12]  340 	jr	Z,00114$
                            341 ;src/entities/user.c:101: create_enemy((rand()%80),(rand()%199),(rand()%3));
   0175 CDr00r00      [17]  342 	call	_rand
   0178 01 03 00      [10]  343 	ld	bc,#0x0003
   017B C5            [11]  344 	push	bc
   017C E5            [11]  345 	push	hl
   017D CDr00r00      [17]  346 	call	__modsint
   0180 F1            [10]  347 	pop	af
   0181 F1            [10]  348 	pop	af
   0182 DD 75 FF      [19]  349 	ld	-1 (ix),l
   0185 CDr00r00      [17]  350 	call	_rand
   0188 01 C7 00      [10]  351 	ld	bc,#0x00C7
   018B C5            [11]  352 	push	bc
   018C E5            [11]  353 	push	hl
   018D CDr00r00      [17]  354 	call	__modsint
   0190 F1            [10]  355 	pop	af
   0191 E3            [19]  356 	ex	(sp),hl
   0192 CDr00r00      [17]  357 	call	_rand
   0195 11 50 00      [10]  358 	ld	de,#0x0050
   0198 D5            [11]  359 	push	de
   0199 E5            [11]  360 	push	hl
   019A CDr00r00      [17]  361 	call	__modsint
   019D F1            [10]  362 	pop	af
   019E F1            [10]  363 	pop	af
   019F EB            [ 4]  364 	ex	de,hl
   01A0 C1            [10]  365 	pop	bc
   01A1 DD 7E FF      [19]  366 	ld	a,-1 (ix)
   01A4 F5            [11]  367 	push	af
   01A5 33            [ 6]  368 	inc	sp
   01A6 C5            [11]  369 	push	bc
   01A7 D5            [11]  370 	push	de
   01A8 CDr00r00      [17]  371 	call	_create_enemy
   01AB F1            [10]  372 	pop	af
   01AC F1            [10]  373 	pop	af
   01AD 33            [ 6]  374 	inc	sp
   01AE                     375 00114$:
                            376 ;src/entities/user.c:104: if (cpct_isKeyPressed(Key_J)){
   01AE 21 05 20      [10]  377 	ld	hl,#0x2005
   01B1 E5            [11]  378 	push	hl
   01B2 CDr00r00      [17]  379 	call	_cpct_isKeyPressed
   01B5 F1            [10]  380 	pop	af
   01B6 7D            [ 4]  381 	ld	a,l
   01B7 B7            [ 4]  382 	or	a, a
   01B8 CAr4Er02      [10]  383 	jp	Z,00116$
                            384 ;src/entities/user.c:105: x=rand()%80;
   01BB CDr00r00      [17]  385 	call	_rand
   01BE 01 50 00      [10]  386 	ld	bc,#0x0050
   01C1 C5            [11]  387 	push	bc
   01C2 E5            [11]  388 	push	hl
   01C3 CDr00r00      [17]  389 	call	__modsint
   01C6 F1            [10]  390 	pop	af
   01C7 F1            [10]  391 	pop	af
   01C8 DD 75 FC      [19]  392 	ld	-4 (ix),l
                            393 ;src/entities/user.c:106: y=rand()%199;
   01CB CDr00r00      [17]  394 	call	_rand
   01CE 01 C7 00      [10]  395 	ld	bc,#0x00C7
   01D1 C5            [11]  396 	push	bc
   01D2 E5            [11]  397 	push	hl
   01D3 CDr00r00      [17]  398 	call	__modsint
   01D6 F1            [10]  399 	pop	af
   01D7 F1            [10]  400 	pop	af
   01D8 4D            [ 4]  401 	ld	c,l
                            402 ;src/entities/user.c:107: create_enemy(x,y,(rand()%3));
   01D9 C5            [11]  403 	push	bc
   01DA CDr00r00      [17]  404 	call	_rand
   01DD 11 03 00      [10]  405 	ld	de,#0x0003
   01E0 D5            [11]  406 	push	de
   01E1 E5            [11]  407 	push	hl
   01E2 CDr00r00      [17]  408 	call	__modsint
   01E5 F1            [10]  409 	pop	af
   01E6 F1            [10]  410 	pop	af
   01E7 C1            [10]  411 	pop	bc
   01E8 5D            [ 4]  412 	ld	e,l
   01E9 DD 71 FD      [19]  413 	ld	-3 (ix),c
   01EC DD 36 FE 00   [19]  414 	ld	-2 (ix),#0x00
   01F0 DD 4E FC      [19]  415 	ld	c,-4 (ix)
   01F3 06 00         [ 7]  416 	ld	b,#0x00
   01F5 C5            [11]  417 	push	bc
   01F6 7B            [ 4]  418 	ld	a,e
   01F7 F5            [11]  419 	push	af
   01F8 33            [ 6]  420 	inc	sp
   01F9 DD 6E FD      [19]  421 	ld	l,-3 (ix)
   01FC DD 66 FE      [19]  422 	ld	h,-2 (ix)
   01FF E5            [11]  423 	push	hl
   0200 C5            [11]  424 	push	bc
   0201 CDr00r00      [17]  425 	call	_create_enemy
   0204 F1            [10]  426 	pop	af
   0205 F1            [10]  427 	pop	af
   0206 33            [ 6]  428 	inc	sp
   0207 CDr00r00      [17]  429 	call	_rand
   020A 11 03 00      [10]  430 	ld	de,#0x0003
   020D D5            [11]  431 	push	de
   020E E5            [11]  432 	push	hl
   020F CDr00r00      [17]  433 	call	__modsint
   0212 F1            [10]  434 	pop	af
   0213 F1            [10]  435 	pop	af
   0214 C1            [10]  436 	pop	bc
   0215 5D            [ 4]  437 	ld	e,l
   0216 21 08 00      [10]  438 	ld	hl,#0x0008
   0219 09            [11]  439 	add	hl,bc
   021A C5            [11]  440 	push	bc
   021B 7B            [ 4]  441 	ld	a,e
   021C F5            [11]  442 	push	af
   021D 33            [ 6]  443 	inc	sp
   021E DD 5E FD      [19]  444 	ld	e,-3 (ix)
   0221 DD 56 FE      [19]  445 	ld	d,-2 (ix)
   0224 D5            [11]  446 	push	de
   0225 E5            [11]  447 	push	hl
   0226 CDr00r00      [17]  448 	call	_create_enemy
   0229 F1            [10]  449 	pop	af
   022A F1            [10]  450 	pop	af
   022B 33            [ 6]  451 	inc	sp
   022C CDr00r00      [17]  452 	call	_rand
   022F 11 03 00      [10]  453 	ld	de,#0x0003
   0232 D5            [11]  454 	push	de
   0233 E5            [11]  455 	push	hl
   0234 CDr00r00      [17]  456 	call	__modsint
   0237 F1            [10]  457 	pop	af
   0238 F1            [10]  458 	pop	af
   0239 C1            [10]  459 	pop	bc
   023A 5D            [ 4]  460 	ld	e,l
   023B 21 10 00      [10]  461 	ld	hl,#0x0010
   023E 09            [11]  462 	add	hl,bc
   023F 7B            [ 4]  463 	ld	a,e
   0240 F5            [11]  464 	push	af
   0241 33            [ 6]  465 	inc	sp
   0242 D1            [10]  466 	pop	de
   0243 C1            [10]  467 	pop	bc
   0244 C5            [11]  468 	push	bc
   0245 D5            [11]  469 	push	de
   0246 C5            [11]  470 	push	bc
   0247 E5            [11]  471 	push	hl
   0248 CDr00r00      [17]  472 	call	_create_enemy
   024B F1            [10]  473 	pop	af
   024C F1            [10]  474 	pop	af
   024D 33            [ 6]  475 	inc	sp
   024E                     476 00116$:
                            477 ;src/entities/user.c:112: if (cpct_isKeyPressed(Key_K)){
   024E 21 04 20      [10]  478 	ld	hl,#0x2004
   0251 E5            [11]  479 	push	hl
   0252 CDr00r00      [17]  480 	call	_cpct_isKeyPressed
   0255 F1            [10]  481 	pop	af
   0256 7D            [ 4]  482 	ld	a,l
   0257 B7            [ 4]  483 	or	a, a
   0258 28 44         [12]  484 	jr	Z,00118$
                            485 ;src/entities/user.c:113: create_enemy_group((rand()%10)+5,rand()%40,rand()%3,12);
   025A CDr00r00      [17]  486 	call	_rand
   025D 01 03 00      [10]  487 	ld	bc,#0x0003
   0260 C5            [11]  488 	push	bc
   0261 E5            [11]  489 	push	hl
   0262 CDr00r00      [17]  490 	call	__modsint
   0265 F1            [10]  491 	pop	af
   0266 F1            [10]  492 	pop	af
   0267 DD 75 FD      [19]  493 	ld	-3 (ix),l
   026A CDr00r00      [17]  494 	call	_rand
   026D 01 28 00      [10]  495 	ld	bc,#0x0028
   0270 C5            [11]  496 	push	bc
   0271 E5            [11]  497 	push	hl
   0272 CDr00r00      [17]  498 	call	__modsint
   0275 F1            [10]  499 	pop	af
   0276 E3            [19]  500 	ex	(sp),hl
   0277 CDr00r00      [17]  501 	call	_rand
   027A 11 0A 00      [10]  502 	ld	de,#0x000A
   027D D5            [11]  503 	push	de
   027E E5            [11]  504 	push	hl
   027F CDr00r00      [17]  505 	call	__modsint
   0282 F1            [10]  506 	pop	af
   0283 F1            [10]  507 	pop	af
   0284 EB            [ 4]  508 	ex	de,hl
   0285 C1            [10]  509 	pop	bc
   0286 13            [ 6]  510 	inc	de
   0287 13            [ 6]  511 	inc	de
   0288 13            [ 6]  512 	inc	de
   0289 13            [ 6]  513 	inc	de
   028A 13            [ 6]  514 	inc	de
   028B 3E 0C         [ 7]  515 	ld	a,#0x0C
   028D F5            [11]  516 	push	af
   028E 33            [ 6]  517 	inc	sp
   028F DD 7E FD      [19]  518 	ld	a,-3 (ix)
   0292 F5            [11]  519 	push	af
   0293 33            [ 6]  520 	inc	sp
   0294 C5            [11]  521 	push	bc
   0295 D5            [11]  522 	push	de
   0296 CDr00r00      [17]  523 	call	_create_enemy_group
   0299 21 06 00      [10]  524 	ld	hl,#6
   029C 39            [11]  525 	add	hl,sp
   029D F9            [ 6]  526 	ld	sp,hl
   029E                     527 00118$:
                            528 ;src/entities/user.c:116: if (cpct_isKeyPressed(Key_Space)){
   029E 21 05 80      [10]  529 	ld	hl,#0x8005
   02A1 E5            [11]  530 	push	hl
   02A2 CDr00r00      [17]  531 	call	_cpct_isKeyPressed
   02A5 F1            [10]  532 	pop	af
                            533 ;src/entities/user.c:117: create_shoot(user.x+2, user.y, shoot_type);
                            534 ;src/entities/user.c:116: if (cpct_isKeyPressed(Key_Space)){
   02A6 7D            [ 4]  535 	ld	a,l
   02A7 B7            [ 4]  536 	or	a, a
   02A8 28 16         [12]  537 	jr	Z,00120$
                            538 ;src/entities/user.c:117: create_shoot(user.x+2, user.y, shoot_type);
   02AA 21r03r00      [10]  539 	ld	hl, #_user + 3
   02AD 46            [ 7]  540 	ld	b,(hl)
   02AE 3Ar02r00      [13]  541 	ld	a, (#(_user + 0x0002) + 0)
   02B1 57            [ 4]  542 	ld	d,a
   02B2 14            [ 4]  543 	inc	d
   02B3 14            [ 4]  544 	inc	d
   02B4 3Ar19r00      [13]  545 	ld	a,(_shoot_type)
   02B7 F5            [11]  546 	push	af
   02B8 33            [ 6]  547 	inc	sp
   02B9 4A            [ 4]  548 	ld	c, d
   02BA C5            [11]  549 	push	bc
   02BB CDr00r00      [17]  550 	call	_create_shoot
   02BE F1            [10]  551 	pop	af
   02BF 33            [ 6]  552 	inc	sp
   02C0                     553 00120$:
                            554 ;src/entities/user.c:121: if (cpct_isKeyPressed(Key_L)){
   02C0 21 04 10      [10]  555 	ld	hl,#0x1004
   02C3 E5            [11]  556 	push	hl
   02C4 CDr00r00      [17]  557 	call	_cpct_isKeyPressed
   02C7 F1            [10]  558 	pop	af
   02C8 7D            [ 4]  559 	ld	a,l
   02C9 B7            [ 4]  560 	or	a, a
   02CA 28 43         [12]  561 	jr	Z,00122$
                            562 ;src/entities/user.c:122: create_explosion((rand()%20)+5,(rand()%80)+20,rand()%2);
   02CC CDr00r00      [17]  563 	call	_rand
   02CF 01 02 00      [10]  564 	ld	bc,#0x0002
   02D2 C5            [11]  565 	push	bc
   02D3 E5            [11]  566 	push	hl
   02D4 CDr00r00      [17]  567 	call	__modsint
   02D7 F1            [10]  568 	pop	af
   02D8 F1            [10]  569 	pop	af
   02D9 DD 75 FD      [19]  570 	ld	-3 (ix),l
   02DC CDr00r00      [17]  571 	call	_rand
   02DF 01 50 00      [10]  572 	ld	bc,#0x0050
   02E2 C5            [11]  573 	push	bc
   02E3 E5            [11]  574 	push	hl
   02E4 CDr00r00      [17]  575 	call	__modsint
   02E7 F1            [10]  576 	pop	af
   02E8 F1            [10]  577 	pop	af
   02E9 7D            [ 4]  578 	ld	a,l
   02EA C6 14         [ 7]  579 	add	a, #0x14
   02EC 5F            [ 4]  580 	ld	e,a
   02ED D5            [11]  581 	push	de
   02EE CDr00r00      [17]  582 	call	_rand
   02F1 01 14 00      [10]  583 	ld	bc,#0x0014
   02F4 C5            [11]  584 	push	bc
   02F5 E5            [11]  585 	push	hl
   02F6 CDr00r00      [17]  586 	call	__modsint
   02F9 F1            [10]  587 	pop	af
   02FA F1            [10]  588 	pop	af
   02FB D1            [10]  589 	pop	de
   02FC 7D            [ 4]  590 	ld	a,l
   02FD C6 05         [ 7]  591 	add	a, #0x05
   02FF 57            [ 4]  592 	ld	d,a
   0300 DD 7E FD      [19]  593 	ld	a,-3 (ix)
   0303 F5            [11]  594 	push	af
   0304 33            [ 6]  595 	inc	sp
   0305 7B            [ 4]  596 	ld	a,e
   0306 F5            [11]  597 	push	af
   0307 33            [ 6]  598 	inc	sp
   0308 D5            [11]  599 	push	de
   0309 33            [ 6]  600 	inc	sp
   030A CDr00r00      [17]  601 	call	_create_explosion
   030D F1            [10]  602 	pop	af
   030E 33            [ 6]  603 	inc	sp
   030F                     604 00122$:
                            605 ;src/entities/user.c:126: if (user.ax!=0){
   030F 21r08r00      [10]  606 	ld	hl, #(_user + 0x0008) + 0
   0312 56            [ 7]  607 	ld	d,(hl)
                            608 ;src/entities/user.c:127: if ((( user.vx >= 0 ) && (user.vx < user.topvx)) || ((user.vx <= 0 ) && (user.vx > -user.topvx))){
                            609 ;src/entities/user.c:126: if (user.ax!=0){
   0313 7A            [ 4]  610 	ld	a,d
   0314 B7            [ 4]  611 	or	a, a
   0315 28 42         [12]  612 	jr	Z,00129$
                            613 ;src/entities/user.c:127: if ((( user.vx >= 0 ) && (user.vx < user.topvx)) || ((user.vx <= 0 ) && (user.vx > -user.topvx))){
   0317 21r04r00      [10]  614 	ld	hl, #(_user + 0x0004) + 0
   031A 5E            [ 7]  615 	ld	e,(hl)
   031B 21r06r00      [10]  616 	ld	hl,#_user + 6
   031E CB 7B         [ 8]  617 	bit	7, e
   0320 20 0B         [12]  618 	jr	NZ,00127$
   0322 46            [ 7]  619 	ld	b,(hl)
   0323 7B            [ 4]  620 	ld	a,e
   0324 90            [ 4]  621 	sub	a, b
   0325 E2r2Ar03      [10]  622 	jp	PO, 00210$
   0328 EE 80         [ 7]  623 	xor	a, #0x80
   032A                     624 00210$:
   032A FAr54r03      [10]  625 	jp	M,00123$
   032D                     626 00127$:
   032D AF            [ 4]  627 	xor	a, a
   032E 93            [ 4]  628 	sub	a, e
   032F E2r34r03      [10]  629 	jp	PO, 00211$
   0332 EE 80         [ 7]  630 	xor	a, #0x80
   0334                     631 00211$:
   0334 FAr59r03      [10]  632 	jp	M,00129$
   0337 7E            [ 7]  633 	ld	a,(hl)
   0338 6F            [ 4]  634 	ld	l,a
   0339 17            [ 4]  635 	rla
   033A 9F            [ 4]  636 	sbc	a, a
   033B 67            [ 4]  637 	ld	h,a
   033C AF            [ 4]  638 	xor	a, a
   033D 95            [ 4]  639 	sub	a, l
   033E 6F            [ 4]  640 	ld	l,a
   033F 3E 00         [ 7]  641 	ld	a, #0x00
   0341 9C            [ 4]  642 	sbc	a, h
   0342 67            [ 4]  643 	ld	h,a
   0343 7B            [ 4]  644 	ld	a,e
   0344 4F            [ 4]  645 	ld	c,a
   0345 17            [ 4]  646 	rla
   0346 9F            [ 4]  647 	sbc	a, a
   0347 47            [ 4]  648 	ld	b,a
   0348 7D            [ 4]  649 	ld	a,l
   0349 91            [ 4]  650 	sub	a, c
   034A 7C            [ 4]  651 	ld	a,h
   034B 98            [ 4]  652 	sbc	a, b
   034C E2r51r03      [10]  653 	jp	PO, 00212$
   034F EE 80         [ 7]  654 	xor	a, #0x80
   0351                     655 00212$:
   0351 F2r59r03      [10]  656 	jp	P,00129$
   0354                     657 00123$:
                            658 ;src/entities/user.c:128: user.vx+=user.ax;
   0354 7B            [ 4]  659 	ld	a,e
   0355 82            [ 4]  660 	add	a, d
   0356 32r04r00      [13]  661 	ld	(#(_user + 0x0004)),a
   0359                     662 00129$:
                            663 ;src/entities/user.c:132: if (user.vx>0){
   0359 21r04r00      [10]  664 	ld	hl, #(_user + 0x0004) + 0
   035C 56            [ 7]  665 	ld	d,(hl)
   035D AF            [ 4]  666 	xor	a, a
   035E 92            [ 4]  667 	sub	a, d
   035F E2r64r03      [10]  668 	jp	PO, 00213$
   0362 EE 80         [ 7]  669 	xor	a, #0x80
   0364                     670 00213$:
   0364 F2r6Er03      [10]  671 	jp	P,00133$
                            672 ;src/entities/user.c:133: user.vx--;
   0367 15            [ 4]  673 	dec	d
   0368 21r04r00      [10]  674 	ld	hl,#(_user + 0x0004)
   036B 72            [ 7]  675 	ld	(hl),d
   036C 18 09         [12]  676 	jr	00134$
   036E                     677 00133$:
                            678 ;src/entities/user.c:134: } else if (user.vx<0){
   036E CB 7A         [ 8]  679 	bit	7, d
   0370 28 05         [12]  680 	jr	Z,00134$
                            681 ;src/entities/user.c:135: user.vx++;
   0372 14            [ 4]  682 	inc	d
   0373 21r04r00      [10]  683 	ld	hl,#(_user + 0x0004)
   0376 72            [ 7]  684 	ld	(hl),d
   0377                     685 00134$:
                            686 ;src/entities/user.c:138: user.x+=user.vx;
   0377 21r02r00      [10]  687 	ld	hl, #(_user + 0x0002) + 0
   037A 56            [ 7]  688 	ld	d,(hl)
   037B 21r04r00      [10]  689 	ld	hl, #(_user + 0x0004) + 0
   037E 66            [ 7]  690 	ld	h,(hl)
   037F 7A            [ 4]  691 	ld	a,d
   0380 84            [ 4]  692 	add	a, h
   0381 57            [ 4]  693 	ld	d,a
   0382 21r02r00      [10]  694 	ld	hl,#(_user + 0x0002)
   0385 72            [ 7]  695 	ld	(hl),d
                            696 ;src/entities/user.c:140: if (user.x<0)
   0386 21r02r00      [10]  697 	ld	hl, #(_user + 0x0002) + 0
   0389 5E            [ 7]  698 	ld	e,(hl)
   038A CB 7A         [ 8]  699 	bit	7, d
   038C 28 07         [12]  700 	jr	Z,00138$
                            701 ;src/entities/user.c:141: user.x=0;
   038E 21r02r00      [10]  702 	ld	hl,#(_user + 0x0002)
   0391 36 00         [10]  703 	ld	(hl),#0x00
   0393 18 25         [12]  704 	jr	00140$
   0395                     705 00138$:
                            706 ;src/entities/user.c:142: else if (user.x> 79-user.w){
   0395 21r0Ar00      [10]  707 	ld	hl, #_user + 10
   0398 66            [ 7]  708 	ld	h,(hl)
   0399 4C            [ 4]  709 	ld	c,h
   039A 06 00         [ 7]  710 	ld	b,#0x00
   039C 3E 4F         [ 7]  711 	ld	a,#0x4F
   039E 91            [ 4]  712 	sub	a, c
   039F 4F            [ 4]  713 	ld	c,a
   03A0 3E 00         [ 7]  714 	ld	a,#0x00
   03A2 98            [ 4]  715 	sbc	a, b
   03A3 47            [ 4]  716 	ld	b,a
   03A4 7B            [ 4]  717 	ld	a,e
   03A5 17            [ 4]  718 	rla
   03A6 9F            [ 4]  719 	sbc	a, a
   03A7 57            [ 4]  720 	ld	d,a
   03A8 79            [ 4]  721 	ld	a,c
   03A9 93            [ 4]  722 	sub	a, e
   03AA 78            [ 4]  723 	ld	a,b
   03AB 9A            [ 4]  724 	sbc	a, d
   03AC E2rB1r03      [10]  725 	jp	PO, 00214$
   03AF EE 80         [ 7]  726 	xor	a, #0x80
   03B1                     727 00214$:
   03B1 F2rBAr03      [10]  728 	jp	P,00140$
                            729 ;src/entities/user.c:143: user.x = 79-user.w;
   03B4 3E 4F         [ 7]  730 	ld	a,#0x4F
   03B6 94            [ 4]  731 	sub	a, h
   03B7 32r02r00      [13]  732 	ld	(#(_user + 0x0002)),a
   03BA                     733 00140$:
   03BA DD F9         [10]  734 	ld	sp, ix
   03BC DD E1         [14]  735 	pop	ix
   03BE C9            [10]  736 	ret
                            737 ;src/entities/user.c:147: void draw_user(u8* screen){
                            738 ;	---------------------------------
                            739 ; Function draw_user
                            740 ; ---------------------------------
   03BF                     741 _draw_user::
   03BF DD E5         [15]  742 	push	ix
   03C1 DD 21 00 00   [14]  743 	ld	ix,#0
   03C5 DD 39         [15]  744 	add	ix,sp
                            745 ;src/entities/user.c:149: pscreen = cpct_getScreenPtr(screen, user.x, user.y);
   03C7 21r03r00      [10]  746 	ld	hl, #_user + 3
   03CA 4E            [ 7]  747 	ld	c,(hl)
   03CB 21r02r00      [10]  748 	ld	hl, #_user + 2
   03CE 66            [ 7]  749 	ld	h,(hl)
   03CF DD 5E 04      [19]  750 	ld	e,4 (ix)
   03D2 DD 56 05      [19]  751 	ld	d,5 (ix)
   03D5 79            [ 4]  752 	ld	a,c
   03D6 F5            [11]  753 	push	af
   03D7 33            [ 6]  754 	inc	sp
   03D8 E5            [11]  755 	push	hl
   03D9 33            [ 6]  756 	inc	sp
   03DA D5            [11]  757 	push	de
   03DB CDr00r00      [17]  758 	call	_cpct_getScreenPtr
   03DE EB            [ 4]  759 	ex	de,hl
                            760 ;src/entities/user.c:150: cpct_drawSprite( (u8*) user.sprite,pscreen,user.w,user.h);
   03DF 21r0Br00      [10]  761 	ld	hl, #_user + 11
   03E2 46            [ 7]  762 	ld	b,(hl)
   03E3 3Ar0Ar00      [13]  763 	ld	a, (#_user + 10)
   03E6 2Ar00r00      [16]  764 	ld	hl, (#_user + 0)
   03E9 E5            [11]  765 	push	hl
   03EA FD E1         [14]  766 	pop	iy
   03EC C5            [11]  767 	push	bc
   03ED 33            [ 6]  768 	inc	sp
   03EE F5            [11]  769 	push	af
   03EF 33            [ 6]  770 	inc	sp
   03F0 D5            [11]  771 	push	de
   03F1 FD E5         [15]  772 	push	iy
   03F3 CDr00r00      [17]  773 	call	_cpct_drawSprite
   03F6 DD E1         [14]  774 	pop	ix
   03F8 C9            [10]  775 	ret
                            776 ;src/entities/user.c:153: void set_score(u32 new_score){
                            777 ;	---------------------------------
                            778 ; Function set_score
                            779 ; ---------------------------------
   03F9                     780 _set_score::
                            781 ;src/entities/user.c:154: user.score = new_score;
   03F9 11r0Fr00      [10]  782 	ld	de,#_user+15
   03FC 21 02 00      [10]  783 	ld	hl, #0x0002
   03FF 39            [11]  784 	add	hl, sp
   0400 01 04 00      [10]  785 	ld	bc, #0x0004
   0403 ED B0         [21]  786 	ldir
   0405 C9            [10]  787 	ret
                            788 ;src/entities/user.c:156: void add_score(u16 new_add_score){
                            789 ;	---------------------------------
                            790 ; Function add_score
                            791 ; ---------------------------------
   0406                     792 _add_score::
   0406 DD E5         [15]  793 	push	ix
   0408 DD 21 00 00   [14]  794 	ld	ix,#0
   040C DD 39         [15]  795 	add	ix,sp
   040E F5            [11]  796 	push	af
   040F F5            [11]  797 	push	af
                            798 ;src/entities/user.c:157: user.score += new_add_score;
   0410 11r0Fr00      [10]  799 	ld	de,#(_user + 0x000f)
   0413 21 00 00      [10]  800 	ld	hl, #0x0000
   0416 39            [11]  801 	add	hl, sp
   0417 EB            [ 4]  802 	ex	de, hl
   0418 01 04 00      [10]  803 	ld	bc, #0x0004
   041B ED B0         [21]  804 	ldir
   041D DD 6E 04      [19]  805 	ld	l,4 (ix)
   0420 DD 66 05      [19]  806 	ld	h,5 (ix)
   0423 01 00 00      [10]  807 	ld	bc,#0x0000
   0426 DD 7E FC      [19]  808 	ld	a,-4 (ix)
   0429 85            [ 4]  809 	add	a, l
   042A 5F            [ 4]  810 	ld	e,a
   042B DD 7E FD      [19]  811 	ld	a,-3 (ix)
   042E 8C            [ 4]  812 	adc	a, h
   042F 57            [ 4]  813 	ld	d,a
   0430 DD 7E FE      [19]  814 	ld	a,-2 (ix)
   0433 89            [ 4]  815 	adc	a, c
   0434 4F            [ 4]  816 	ld	c,a
   0435 DD 7E FF      [19]  817 	ld	a,-1 (ix)
   0438 88            [ 4]  818 	adc	a, b
   0439 47            [ 4]  819 	ld	b,a
   043A ED 53r0Fr00   [20]  820 	ld	((_user + 0x000f)), de
   043E ED 43r11r00   [20]  821 	ld	((_user + 0x000f)+2), bc
   0442 DD F9         [10]  822 	ld	sp, ix
   0444 DD E1         [14]  823 	pop	ix
   0446 C9            [10]  824 	ret
                            825 ;src/entities/user.c:159: u32 get_score(){
                            826 ;	---------------------------------
                            827 ; Function get_score
                            828 ; ---------------------------------
   0447                     829 _get_score::
                            830 ;src/entities/user.c:160: return user.score;
   0447 2Ar0Fr00      [16]  831 	ld	hl, (#(_user + 0x000f) + 0)
   044A ED 5Br11r00   [20]  832 	ld	de, (#(_user + 0x000f) + 2)
   044E C9            [10]  833 	ret
                            834 	.area _CODE
                            835 	.area _INITIALIZER
                            836 	.area _CABS (ABS)
